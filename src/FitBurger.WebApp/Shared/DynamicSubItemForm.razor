@inherits ComponentBase

@using FitBurger.WebApp.Services
@using VxFormGenerator.Core
@using FitBurger.WebApp.Attributes
@using System.Reflection
@using System.ComponentModel.DataAnnotations
@using FitBurger.WebApp.Models.Abstractions

@typeparam TSubitemModel where TSubitemModel : new()

<EditForm Model="Model" OnValidSubmit="HandleValidSubmit">
    <DataAnnotationsValidator/>
    <RenderFormElements/>
    <GenderInputSelect Model="Model"/>
    <UserNameAndPasswordInputTexts Model="Model"/>
    <ProductInputSelect Model="Model"/>
    <Submit/>
</EditForm>

<DynamicTable TListModel="TSubitemModel" Model="ModelCollection"/>

@code {

    private TSubitemModel Model { get; set;  } = new();

    [Parameter]
    public ICollection<TSubitemModel> ModelCollection { get; set; } = default!;
    
    private void HandleValidSubmit()
    {
        ModelCollection.Add(Model);
        
        Model = new TSubitemModel();
    }

}